{"ast":null,"code":"import _slicedToArray from\"/home/user/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430 \\u0443\\u0447\\u0435\\u0431\\u0430/React-Redax-Store/care-store/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import{useAppDispatch,useAppSelector}from'../hooks/redux';import{fetchGoods}from'../store/actions/goodActions';import{CatalogItem}from'../components/catalogItem';import{FilterPanel}from'../components/filterPanel';import{MainTop}from'../components/mainTop';import ReactPaginate from'react-paginate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var itemsPerPage=6;export function Catalog(){var _useAppSelector=useAppSelector(function(state){return state.good;}),error=_useAppSelector.error,loading=_useAppSelector.loading,goods=_useAppSelector.goods;var page=useRef(1);var dispatch=useAppDispatch();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),itemOffset=_useState2[0],setItemOffset=_useState2[1];var endOffset=itemOffset+itemsPerPage;var currentGoods=goods.slice(itemOffset,endOffset);useEffect(function(){dispatch(fetchGoods(page.current,itemsPerPage));},[dispatch]);var pageCount=Math.ceil(goods.length/itemsPerPage);var pageChangeHandler=function pageChangeHandler(_ref){var selected=_ref.selected;var newOffset=selected*itemsPerPage%goods.length;setItemOffset(newOffset);};return/*#__PURE__*/_jsxs(\"main\",{className:\"main\",children:[/*#__PURE__*/_jsx(MainTop,{}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-error\",children:error}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-loading\",children:\"Loading...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(FilterPanel,{}),/*#__PURE__*/_jsx(\"div\",{className:\"catalog-list\",children:currentGoods.map(function(el){return/*#__PURE__*/_jsx(CatalogItem,{good:el},el.id);})})]}),/*#__PURE__*/_jsx(ReactPaginate,{breakLabel:\"...\",nextLabel:\"\",previousLabel:\"\",onPageChange:pageChangeHandler,pageRangeDisplayed:5,pageCount:pageCount,forcePage:page.current-1,containerClassName:\"pagination-conainer list\",pageClassName:\"pagination-item\",previousLinkClassName:\"pag-prev-arrow\",nextLinkClassName:\"pag-next-arrow\"})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","useAppDispatch","useAppSelector","fetchGoods","CatalogItem","FilterPanel","MainTop","ReactPaginate","jsx","_jsx","jsxs","_jsxs","itemsPerPage","Catalog","_useAppSelector","state","good","error","loading","goods","page","dispatch","_useState","_useState2","_slicedToArray","itemOffset","setItemOffset","endOffset","currentGoods","slice","current","pageCount","Math","ceil","length","pageChangeHandler","_ref","selected","newOffset","className","children","map","el","id","breakLabel","nextLabel","previousLabel","onPageChange","pageRangeDisplayed","forcePage","containerClassName","pageClassName","previousLinkClassName","nextLinkClassName"],"sources":["/home/user/Документы/Работа учеба/React-Redax-Store/care-store/src/pages/catalog.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { useAppDispatch, useAppSelector } from '../hooks/redux';\nimport { fetchGoods } from '../store/actions/goodActions';\nimport { CatalogItem } from '../components/catalogItem';\nimport { FilterPanel } from '../components/filterPanel';\nimport { MainTop } from '../components/mainTop';\nimport ReactPaginate from 'react-paginate';\n\nconst itemsPerPage = 6;\n\nexport function Catalog() {\n  const { error, loading, goods } = useAppSelector((state) => state.good);\n  const page = useRef(1);\n  const dispatch = useAppDispatch();\n\n  const [itemOffset, setItemOffset] = useState(0);\n  const endOffset = itemOffset + itemsPerPage;\n  let currentGoods = goods.slice(itemOffset, endOffset);\n\n  useEffect(() => {\n    dispatch(fetchGoods(page.current, itemsPerPage));\n  }, [dispatch]);\n\n  const pageCount = Math.ceil(goods.length / itemsPerPage);\n  const pageChangeHandler = ({ selected }: { selected: number }) => {\n    const newOffset = (selected * itemsPerPage) % goods.length;\n    setItemOffset(newOffset);\n  };\n\n  return (\n    <main className='main'>\n      <MainTop />\n      {error && <p className='text-error'>{error}</p>}\n      {loading && <p className='text-loading'>Loading...</p>}\n      <div className='main-content'>\n        <FilterPanel />\n        <div className='catalog-list'>\n          {currentGoods.map((el) => (\n            <CatalogItem key={el.id} good={el} />\n          ))}\n        </div>\n      </div>\n      <ReactPaginate\n        breakLabel='...'\n        nextLabel=''\n        previousLabel=''\n        onPageChange={pageChangeHandler}\n        pageRangeDisplayed={5}\n        pageCount={pageCount}\n        forcePage={page.current - 1}\n        containerClassName='pagination-conainer list'\n        pageClassName='pagination-item'\n        previousLinkClassName='pag-prev-arrow'\n        nextLinkClassName='pag-next-arrow'\n      />\n    </main>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}